<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Caption & Hashtag Generator | Bita Digital Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="../assets/taskhub-logo.png"/>
  <link rel="stylesheet" href="../css/style.css"/>

  <style>
    body {
      background: #0f172a; color: #e2e8f0;
      font-family: system-ui, sans-serif;
      padding: 1.5rem; direction: ltr;
      transition: direction 0.3s;
    }
    body.fa { direction: rtl; font-family: "Vazirmatn", sans-serif; }
    .tool-container {
      max-width: 900px; margin: 0 auto;
      background: rgba(15,23,42,0.4);
      border: 1px solid rgba(148,163,184,0.2);
      border-radius: 1.25rem;
      padding: 1.5rem 1.5rem 2rem; position: relative;
      backdrop-filter: blur(4px);
    }
    #langToggle {
      position: absolute; top: 1rem; right: 1rem;
      background: rgba(15,23,42,0.4);
      border: 1px solid rgba(148,163,184,0.25);
      border-radius: 9999px; color: #e2e8f0;
      font-size: 0.8rem; padding: 0.3rem 0.8rem; cursor: pointer;
    }
    textarea, select, input {
      width: 100%; margin-bottom: 1rem;
      padding: 0.6rem 0.7rem; border-radius: 0.75rem;
      background: rgba(15,23,42,0.6);
      border: 1px solid rgba(148,163,184,0.3);
      color: #e2e8f0;
    }
    .btn-primary {
      background: linear-gradient(135deg, #38bdf8 0%, #6366f1 100%);
      border: none; color: #0f172a; font-weight: 600;
      padding: 0.7rem 1.4rem; border-radius: 9999px;
      cursor: pointer;
    }
    .output-box {
      background: rgba(15,23,42,0.35);
      border: 1px solid rgba(148,163,184,0.12);
      border-radius: 1rem; padding: 1rem;
      margin-top: 1rem;
    }
    .loading { opacity: 0.7; font-style: italic; }
  </style>
</head>
<body>
  <main class="tool-container">
    <button id="langToggle">üåê FA</button>
    <h1 id="title">AI Caption & Hashtag Generator</h1>
    <p id="subtitle">Create catchy captions and hashtags for your posts ‚Äî powered by real AI.</p>

    <form id="captionForm">
      <label id="lblPlatform">Platform</label>
      <select id="platform">
        <option value="instagram">Instagram</option>
        <option value="linkedin">LinkedIn</option>
        <option value="youtube">YouTube</option>
      </select>

      <label id="lblTopic">What is your post about?</label>
      <textarea id="topic" placeholder="e.g. Productivity, AI tools, digital lifestyle"></textarea>

      <label id="lblTone">Tone</label>
      <select id="tone">
        <option value="friendly">Friendly</option>
        <option value="motivational">Motivational</option>
        <option value="professional">Professional</option>
      </select>

      <button type="submit" class="btn-primary" id="btnGenerate">Generate Captions</button>
    </form>

    <div id="status"></div>
    <div id="output" class="output-wrapper"></div>
  </main>

  <script>
    // üåê Language toggle
    const langToggle = document.getElementById("langToggle");
    let lang = "en";
    const texts = {
      en: {
        title: "AI Caption & Hashtag Generator",
        subtitle: "Create catchy captions and hashtags for your posts ‚Äî powered by real AI.",
        lblPlatform: "Platform",
        lblTopic: "What is your post about?",
        lblTone: "Tone",
        btnGenerate: "Generate Captions",
        toggle: "üåê FA",
        loading: "Generating captions...",
        copied: "Copied!"
      },
      fa: {
        title: "ÿ™ŸàŸÑ€åÿØ⁄©ŸÜŸÜÿØŸá ⁄©Ÿæÿ¥ŸÜ Ÿà Ÿáÿ¥ÿ™⁄Ø ÿ®ÿß ŸáŸàÿ¥ ŸÖÿµŸÜŸàÿπ€å",
        subtitle: "⁄©Ÿæÿ¥ŸÜ Ÿà Ÿáÿ¥ÿ™⁄Ø ÿ≠ÿ±ŸÅŸá‚Äåÿß€å ÿ®ÿ≥ÿßÿ≤ÿå ÿ®ÿß ⁄©ŸÖ⁄© ŸáŸàÿ¥ ŸÖÿµŸÜŸàÿπ€å ŸàÿßŸÇÿπ€å.",
        lblPlatform: "ŸæŸÑÿ™ŸÅÿ±ŸÖ",
        lblTopic: "ŸÖŸàÿ∂Ÿàÿπ Ÿæÿ≥ÿ™ ⁄Ü€åÿ≥ÿ™ÿü",
        lblTone: "ŸÑÿ≠ŸÜ ŸÖÿ™ŸÜ",
        btnGenerate: "ÿ™ŸàŸÑ€åÿØ ⁄©Ÿæÿ¥ŸÜ",
        toggle: "üåê EN",
        loading: "ÿØÿ± ÿ≠ÿßŸÑ ÿ™ŸàŸÑ€åÿØ ⁄©Ÿæÿ¥ŸÜ...",
        copied: "⁄©Ÿæ€å ÿ¥ÿØ!"
      }
    };

    langToggle.addEventListener("click", () => {
      lang = lang === "en" ? "fa" : "en";
      const t = texts[lang];
      document.body.classList.toggle("fa", lang === "fa");
      document.getElementById("title").innerText = t.title;
      document.getElementById("subtitle").innerText = t.subtitle;
      document.getElementById("lblPlatform").innerText = t.lblPlatform;
      document.getElementById("lblTopic").innerText = t.lblTopic;
      document.getElementById("lblTone").innerText = t.lblTone;
      document.getElementById("btnGenerate").innerText = t.btnGenerate;
      langToggle.innerText = t.toggle;
    });

    // üß† Handle form submit
    const form = document.getElementById("captionForm");
    const output = document.getElementById("output");
    const status = document.getElementById("status");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const platform = document.getElementById("platform").value;
      const topic = document.getElementById("topic").value;
      const tone = document.getElementById("tone").value;

      status.textContent = texts[lang].loading;
      status.classList.add("loading");
      output.innerHTML = "";

      try {
        // ‚öôÔ∏è Replace this endpoint with your backend function URL (Render, Vercel, etc.)
        const res = await fetch("https://your-backend-domain.com/api/caption-generator", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ platform, topic, tone, lang })
        });
        const data = await res.json();

        status.textContent = "";
        const box = document.createElement("div");
        box.className = "output-box";
        box.innerHTML = `<h3>${lang === 'fa' ? 'ŸÜÿ™€åÿ¨Ÿá:' : 'Result:'}</h3><p>${data.output.replace(/\n/g, '<br>')}</p>`;
        output.appendChild(box);
      } catch (err) {
        status.textContent = "‚ö†Ô∏è Error connecting to API.";
        status.classList.remove("loading");
      }
    });
  </script>
</body>
</html>
